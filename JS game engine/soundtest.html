<!DOCTYPE html>
<html>
<head>
  <title>Sound Test</title>
</head>
<body>
  <h1>Sound Test</h1>
  <p>Press the middle row of keys to play white notes, and the top row to play black notes.</p>

  <script src="SimpleMusic.js"></script>
  <script>
    const audioCtx = new AudioContext();

    const whiteNotes = {
      'a': 'C4',
      's': 'D4',
      'd': 'E4',
      'f': 'F4',
      'g': 'G4',
      'h': 'A4',
      'j': 'B4',
      'k': 'C5',
      'l': 'D5',
      ';': 'E5',
      "'": 'F5',
    };

    const blackNotes = {
      'w': 'C#4',
      'e': 'D#4',
      't': 'F#4',
      'y': 'G#4',
      'u': 'A#4',
      'z': 'Db4',
      'x': 'Eb4',
      'c': 'Gb4',
      'v': 'Ab4',
      'b': 'Bb4',
    };

    const notes = {};

    function onKeyDown(event) {
      Note.start(Note.eventToNote(event));
    }

    function onKeyUp(event) {
      Note.stop(Note.eventToNote(event));
    }

    document.addEventListener('keydown', onKeyDown);
    document.addEventListener('keyup', onKeyUp);
    
      // Define the notes of the melody
      const melody = [
        "E5", "E5", "F5", "G5",
        "G5", "F5", "E5", "D5",
        "C5", "C5", "D5", "E5",
        "E5", "D5", "D5"
      ];

      // Define the duration of each note in milliseconds
      const duration = 500;

      // Define a function to play the melody
      async function playMelody() {
        for (let i = 0; i < melody.length; i++) {
          // Play the current note
          Note.start(melody[i]);
          await sleep(duration);
          Note.stop(melody[i]);
          
          // Pause briefly before playing the next note
          await sleep(50);
        }
      }

      // Define a helper function to pause for a given number of milliseconds
      function sleep(ms) {
        return new Promise(resolve => setTimeout(resolve, ms));
      }

      // Start playing the melody when the page loads
      window.addEventListener("load", playMelody);
    </script>
</body>
</html>
